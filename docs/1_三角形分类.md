# 页面: 三角形分类

本页面用于介绍和展示三角形的两种主要分类方法：按角分类和按边分类。

## 功能概述

- **按角分类**:
  - 锐角三角形：三个内角都小于90°。
  - 直角三角形：一个内角等于90°。
  - 钝角三角形：一个内角大于90°。
- **按边分类**:
  - 等边三角形：三条边长度相等。
  - 等腰三角形：两条边长度相等。
  - 不等边三角形：三条边长度都不相等。

页面为每种类型的三角形都提供了定义和示例图像。

## 实现细节

### 1. 页面布局

使用 `streamlit` 进行页面布局和内容展示。
- `st.title("三角形分类")`: 设置页面主标题。
- `st.header("1. 按角分类")` 和 `st.header("2. 按边分类")`: 创建一级标题。
- `st.subheader(...)`: 创建二级标题。
- `st.markdown(...)`: 用于显示文本和定义。
- `st.image(...)`: 用于显示生成的三角形图像。

### 2. 绘制三角形

使用 `matplotlib` 库动态绘制各种三角形。

#### `plot_triangle` 函数

这是核心的绘图函数，负责根据给定的顶点坐标绘制三角形。

- **参数**:
  - `vertices`: 一个包含三个元组的列表，每个元组代表一个顶点的 `(x, y)` 坐标。
  - `title`: 图像的标题。
  - `color`: 三角形的填充颜色。
  - `figsize`: 图像的大小。

- **实现步骤**:
  1.  使用 `plt.subplots()` 创建一个 `matplotlib` 图形和坐标轴。
  2.  使用 `matplotlib.patches.Polygon` 创建一个多边形（即三角形），并设置填充颜色和透明度。
  3.  将多边形添加到坐标轴上 `ax.add_patch(triangle)`。
  4.  绘制三角形的三条边。
  5.  在顶点处添加文本标签（P1, P2, P3）。
  6.  设置坐标轴范围、长宽比和标题。
  7.  **图像转换**:
      - 为了在 Streamlit 中显示图像，需要将 `matplotlib` 生成的图像转换为 base64 编码的字符串。
      - 使用 `io.BytesIO()` 创建一个内存中的二进制流。
      - `plt.savefig(buf, format='png', ...)` 将图像保存到这个流中。
      - `base64.b64encode(buf.read()).decode('utf-8')` 将二进制数据编码为 base64 字符串。
  8.  返回 base64 字符串。

### 3. 显示图像

- `st.image(f"data:image/png;base64,{acute_img}", ...)`: Streamlit 的 `st.image` 函数可以直接接收 base64 编码的图像数据。

### 4. 字体设置

- `from utils.fonts import setup_custom_font`: 从 `utils` 模块导入字体设置函数。
- `setup_custom_font("font/SimHei.ttf")`: 初始化 `matplotlib` 使用项目中的自定义中文字体 `SimHei.ttf`，以确保图表中的中文标题能正确显示。如果字体文件不存在，它会回退到系统中的其他可用中文字体。

## 代码结构

- **导入库**: 导入 `streamlit`, `numpy`, `matplotlib.pyplot`, `matplotlib.patches`, `io`, `base64` 和自定义的字体设置函数。
- **字体初始化**: 调用 `setup_custom_font`。
- **页面配置**: `st.set_page_config` 和 `st.title`。
- **`plot_triangle` 函数**: 核心绘图逻辑。
- **按角分类**:
  - 为锐角、直角、钝角三角形定义顶点坐标。
  - 调用 `plot_triangle` 生成图像。
  - 使用 `st.image` 显示图像。
- **按边分类**:
  - 为等边、等腰、不等边三角形定义顶点坐标。
  - 调用 `plot_triangle` 生成图像。
  - 使用 `st.image` 显示图像。
- **补充说明**: 使用 `st.markdown` 提供额外信息。